.PHONY: all install clean

CC=$(CXX)
OBJS=TclClientSocket.o TclSocket.o tickle.o tickleProcs.o tickleProcs_wrap.o itoa.o
CFLAGS=@TCL_INCLUDE_SPEC@ -fPIC
CXXFLAGS=@TCL_INCLUDE_SPEC@ -fPIC
LDFLAGS=@TCL_LIB_SPEC@

all: tickle.so

tickle.so: $(OBJS)
	$(CXX) -shared $(LDFLAGS) -g -o $@ $(OBJS)

install: tickle.so
	@cp tickle.so ${HOME}/sbnc/tickle.so
	@echo "tickle.so was copied to ${HOME}/sbnc/tickle.so"
	@echo "You will now have to load it by using /sbnc insmod ./tickle.so (while you're connected to the bouncer)."

clean:
	-rm $(OBJS)
	-rm tickle.so
